<!-- BURGER MENU -->
<input class="menu-btn" type="checkbox" id="menu-btn" onclick="headerToggleMenu()">
<label class="menu-icon" id="menu-icon" for="menu-btn"><span class="nav-icon"></span></label>

<div class="header-inner">
  <!-- LOGO -->
  <a href="/">
    <img class="logo" id="logo" alt="logo" src="/images/argo-logo/Argo-white.svg">
  </a>

  <div class="menu-container" id="menu-container">
    <!-- MENU -->
    <ul class="menu">
      <li><a class="upgrade-now" href="/upgrade/">Upgrade now</a></li>
      <li><a class="whats-new" href="/whats-new/">What's new</a></li>
      <li><a class="about-us" href="/about-us/">About us</a></li>
      <li><a class="documentation" href="/documentation/">Documentation</a></li>
      <li><a class="community" href="/community/">Community</a></li>
      <li><a class="contact-us" href="/contact-us/">Contact us</a></li>
    </ul>
  </div>

  <!-- Account Button -->
  <div class="right-container">
    <a id="account-button" class="account-button" href="/community/users/profile.php">
      <div class="account-avatar">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2">
          <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
          <circle cx="12" cy="7" r="4"></circle>
        </svg>
      </div>
    </a>
  </div>
</div>

<div id="menu" class="hamburger-nav-menu">
  <ul>
    <li><a href="/upgrade/">Upgrade now</a></li>
    <li><a href="/whats-new/">What's new</a></li>
    <li><a href="/about-us/">About us</a></li>
    <li><a href="/documentation/">Documentation</a></li>
    <li><a href="/community/">Community</a></li>
    <li><a href="/contact-us/">Contact Us</a></li>
    <li><a href="/community/users/login.php" id="mobile-account-link">My Account</a></li>
  </ul>
</div>

<script>
  const menu = document.getElementById('menu');
  const header = document.querySelector('header');
  const menuBtn = document.getElementById('menu-btn');
  const menuIcon = document.getElementById('menu-icon');
  let lastScroll = 0;

  function headerToggleMenu() {
    if (!menu.classList.contains('active')) {
      // Opening the menu
      menu.classList.add('active');

      // Get the current scroll height
      const currentMenuHeight = menu.scrollHeight;
      menu.style.height = currentMenuHeight + 'px';

      document.body.classList.add('menu-open');
    } else {
      // Closing the menu
      menu.classList.remove('active');
      menu.style.height = '0';
      document.body.classList.remove('menu-open');
    }
  }

  // Sticky header functionality
  window.addEventListener('scroll', () => {
    const currentScroll = window.pageYOffset;

    // Add sticky class only after scrolling past header height
    if (currentScroll > header.offsetHeight) {
      header.classList.add('sticky');

      // Show header when scrolling up, hide when scrolling down
      if (currentScroll < lastScroll) {
        header.classList.add('show');
      } else {
        header.classList.remove('show');
      }
    } else {
      header.classList.remove('sticky', 'show');
    }

    lastScroll = currentScroll;
  });

  // Close menu when clicking outside
  document.addEventListener('click', (e) => {
    // Don't close if clicking header
    if (menuIcon.contains(e.target)) {
      return;
    }

    // Close only if menu is active and click is outside
    if (menu.classList.contains('active') && !header.contains(e.target)) {
      menuBtn.checked = false;
      headerToggleMenu();
    }
  });

  // Handle window resize to ensure menu works properly
  window.addEventListener('resize', function () {
    // If menu is open and we resize to desktop, close it
    if (window.innerWidth > 900 && menu.classList.contains('active')) {
      menuBtn.checked = false;
      headerToggleMenu();
    }
  });
</script>